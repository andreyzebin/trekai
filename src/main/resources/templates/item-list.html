<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{fragments/layout}">
<head>
    <title>Search</title>
</head>
<body>
<div layout:fragment="content">
    <div class="heading">
        <span>Item List</span>
    </div>

    <div th:if="${searchPerformed}">
        <div class="info" th:if="${items != null and !items.isEmpty()}">
            <span th:text="${#lists.size(items)} + ' Record(s) Found'">1 Record Found</span>
            <span class="nav-link" style="float:right">
                <a href="#">Excel</a> | <a href="#">XML</a>
            </span>
        </div>
        <br/>

        <div th:if="${items == null or items.isEmpty()}">
            <p>No items found matching your criteria.</p>
        </div>
        <table class="jtrac" th:if="${items != null and !items.isEmpty()}">
            <thead>
            <tr>
                <th>ID</th>
                <th>Summary</th>
                <th>Status</th>
                <th>Logged By</th>
                <th>Assigned To</th>
                <th>Severity</th>
                <th>Options</th>
                <th>Timestamp</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="item : ${items}">
                <td><a th:href="@{'/item/view/' + ${item.id}}" th:text="${item.id}">FOO-1</a></td>
                <td th:text="${item.summary}">Mock Summary</td>
                <td th:text="${item.status}">Open</td>
                <td th:text="${item.loggedBy?.name}">Mock User</td>
                <td th:text="${item.assignedTo?.name}"></td>
                <td th:text="${item.severity?.name}"></td>
                <td></td>
                <td th:text="${#dates.format(item.timeStamp, 'yyyy-MM-dd HH:mm')}">2025-07-25 10:00</td>
            </tr>
            </tbody>
        </table>
    </div>
    <div th:if="${!searchPerformed}">
        <p>Please use the search page to find items.</p>
    </div>

    <a th:href="@{/item/search}" class="btn btn-primary" style="margin-top: 10px;">New Search</a>
    <a th:href="@{/dashboard}" class="btn btn-secondary" style="margin-top: 10px;">Back to Dashboard</a>
</div>
</body>
</html>